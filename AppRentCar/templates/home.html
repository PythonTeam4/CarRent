{% extends 'base.html' %}

{% block content %}
<input type="text" id="start-date" placeholder="Data początkowa">
<input type="text" id="end-date" placeholder="Data końcowa">
<button id="check-availability">Sprawdź dostępność</button>

{% if available_cars %}
    <h2>Dostępne samochody:</h2>
        <div class="container-fluid">
        <div class="row">
            {% for car in object_list %}
                <div class="col-md-4 mb-4">
                    <div class="card">
                        <img src="{% url 'images' car.avatar %}" height="150" width="250">
                        <div class="card-body">
                            <a href="{% url 'car_detail' car.id %}">{{ car.brand }} {{ car.model }} <br>{{ car.year }}</br>
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endif %}
<script>
$(function() {
    var today = new Date();
    var nextWeek = new Date();
    nextWeek.setDate(nextWeek.getDate() + 7);

    $("#start-date").datepicker();
    $("#end-date").datepicker();

    $("#start-date").datepicker("setDate", today);
    $("#end-date").datepicker("setDate", nextWeek);

    $("#check-availability").click(function() {
        var startDate = $("#start-date").datepicker("getDate");
        var endDate = $("#end-date").datepicker("getDate");
        if (startDate && endDate) {
            var formattedStartDate = $.datepicker.formatDate("yy-mm-dd", startDate);
            var formattedEndDate = $.datepicker.formatDate("yy-mm-dd", endDate);
            window.location.href = "/available-cars/?start_date=" + formattedStartDate + "&end_date=" + formattedEndDate;
        }
    });
});
</script>

{% endblock %}